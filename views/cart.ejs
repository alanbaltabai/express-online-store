<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("./partials/head.ejs") %>
    <script src="main.js" defer></script>
  </head>

  <body>
    <div class="wrapper">
      <%- include("./partials/header.ejs") %> 

      <% if (!(items.length > 0)) { %>
        <div class="main-404">
          <h1>Ваша корзина пуста.</h1>
          <a href="/">
            <button class="create-button">На главную</button>
          </a>
        </div>
      <% } else { %>
        <h2 id="cart-title">Корзина:</h2>
        <div class="wrapper-cart-page">
          <div class="products-in-cart">
            <% items.forEach(item => { %>
              <div class="product-in-cart">
                <img
                  src="<%= item.image %> "
                  class="cart-product-img"
                />
                <div class="cart-product-description">
                  <div class="title-and-count">
                    <span class="title-in-cart"><%= item.title %></span>
                    <select class="count">
                      <option value="1" selected>1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                    </select>
                  </div>
                  <div class="delete-and-price">
                    <button class="delete-button-cart">Удалить</button>
                    <span class="price-in-cart"><%= item.price %>тг</span>
                  </div>
                </div>
              </div> <!-- product-in-cart -->
            <% }) %> 
          </div> <!-- products-in-cart -->
          
          <div class="check-cart">
            <div class="wrapper-check-cart">
              <div class="wrapper-sum">
                <span>Сумма</span>
                <% let sum = 0; %> 
                <% items.forEach(item => { %>
                    <% sum = sum + item.price %>  
                <% }) %> 
                <span class="sum">
                  <%= sum %>тг 
                </span>
              </div>
  
              <div class="wrapper-delivery">
                <span>Доставка</span>
                <span class="delivery-price">
                  <%= 1000 %>тг 
                </span>
              </div>

              <hr class="hr-in-check" />
  
              <div class="wrapper-total">
                <span>Итого</span>
                <span class="total">
                  <%= sum + 1000 %>тг
                </span>
              </div>

              <button class="confirm-button">ОФОРМИТЬ</button>
              
            </div>
          </div>
        </div> <!-- wrapper-cart-page -->
      <% } %> 

      
      <%- include("./partials/footer.ejs") %>
    
    </div> <!-- wrapper -->
    
  </body>
</html>
